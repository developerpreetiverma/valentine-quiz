<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Valentine Quiz ðŸ’˜</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      :root {
        --card-w: 360px;
        --btn-w: 120px;
        --btn-h: 44px;
        --gap: 16px;
      }

      /* Page base */
      body {
        font-family: Arial, sans-serif;
        background: pink;
        min-height: 100vh;
        margin: 0;
        display: grid;
        place-items: center;
      }

      /* One section per screen */
      .page {
        display: none;
        width: min(92vw, var(--card-w));
      }
      .page.active {
        display: block;
      }

      .container {
        background: white;
        padding: 24px 20px 28px;
        border-radius: 16px;
        box-shadow: 0 6px 18px rgba(0, 0, 0, 0.2);
        text-align: center;
        position: relative;
      }
      h2 {
        margin: 8px 0 10px;
      }
      p {
        margin: 10px 0 18px;
        font-size: 16px;
      }

      /* Shared button appearance and identical size */
      .btn,
      #yesBtn,
      #noBtn {
        width: var(--btn-w);
        height: var(--btn-h);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 16px;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        padding: 0;
        box-sizing: border-box;
        background: #efefef;
        color: #111;
      }

      /* Generic 2-button row for question pages */
      .btn-row {
        display: flex;
        justify-content: center;
        gap: var(--gap);
        margin-top: 8px;
      }

      /* Progress text */
      .nav {
        margin-top: 10px;
        font-size: 13px;
        color: #666;
      }

      /* Final page button colors (same size as above) */
      #yesBtn {
        background: #2a9d8f;
        color: #fff;
      }
      #noBtn {
        background: #e63946;
        color: #fff;
      }

      /* On the final page FIRST load:
       yesBtn should behave like a normal button (NOT fixed).
       Only after first attempt it becomes fixed via JS. */
      #yesBtn {
        position: static; /* in normal flow initially */
        transform: none; /* no centering offset initially */
        z-index: auto;
        touch-action: none; /* improves touch dodge later */
      }

      /* Anger block on No */
      #angry {
        display: none;
        margin-top: 20px;
      }
      #angry img {
        width: 200px;
        max-width: 70%;
      }

      /* SUCCESS block after Yes becomes clickable and is clicked */
      #success {
        display: none;
        margin-top: 18px;
      }
      #success img {
        width: 220px;
        max-width: 80%;
        border-radius: 12px;
        box-shadow: 0 6px 16px rgba(0, 0, 0, 0.18);
      }

      /* Dodge message styling */
      #dodgeMessage {
        position: fixed;
        font-size: 18px;
        font-weight: bold;
        color: #2a9d8f;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        pointer-events: none;
        z-index: 9998;
        opacity: 0;
        transition: opacity 0.3s ease, left 0.3s ease, top 0.3s ease;
        white-space: nowrap;
      }

      #dodgeMessage.show {
        opacity: 1;
      }

      /* Optional: avoid press-shrink on any button */
      .btn:active,
      #yesBtn:active,
      #noBtn:active {
        transform: none;
      }

      /* Small-screen tweaks */
      @media (max-width: 420px) {
        :root {
          --btn-w: 112px;
          --btn-h: 42px;
        }
        p {
          font-size: 15px;
        }
        #dodgeMessage {
          font-size: 16px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Page 1 -->
    <section id="page-1" class="page active">
      <div class="container">
        <h2>Valentine Quiz ðŸ’–</h2>
        <p>Question 1: Do you love me?</p>
        <div class="btn-row">
          <button class="btn" data-next="page-2">Yes</button>
          <button class="btn" data-next="page-2">Of course</button>
        </div>
        <div class="nav">1 / 6</div>
      </div>
    </section>

    <!-- Page 2 -->
    <section id="page-2" class="page">
      <div class="container">
        <h2>Valentine Quiz ðŸ’–</h2>
        <p>Question 2: Where did we meet the first time?</p>
        <div class="btn-row">
          <button class="btn" data-next="page-3">Jhansi</button>
          <button class="btn" data-next="page-3">Gwalior</button>
        </div>
        <div class="nav">2 / 6</div>
      </div>
    </section>

    <!-- Page 3 -->
    <section id="page-3" class="page">
      <div class="container">
        <h2>Valentine Quiz ðŸ’–</h2>
        <p>Question 3: What did I wear on our first date?</p>
        <div class="btn-row">
          <button class="btn" data-next="page-4">Blue</button>
          <button class="btn" data-next="page-4">Black</button>
        </div>
        <div class="nav">3 / 6</div>
      </div>
    </section>

    <!-- Page 4 -->
    <section id="page-4" class="page">
      <div class="container">
        <h2>Valentine Quiz ðŸ’–</h2>
        <p>Question 4: Who propose first?</p>
        <div class="btn-row">
          <button class="btn" data-next="page-5">Me</button>
          <button class="btn" data-next="page-5">You</button>
        </div>
        <div class="nav">4 / 6</div>
      </div>
    </section>

    <!-- Page 5 -->
    <section id="page-5" class="page">
      <div class="container">
        <h2>Valentine Quiz ðŸ’–</h2>
        <p>Question 5: What's my favorite thing?</p>
        <div class="btn-row">
          <button class="btn" data-next="page-final">You</button>
          <button class="btn" data-next="page-final">Only You</button>
        </div>
        <div class="nav">5 / 6</div>
      </div>
    </section>

    <!-- Final Page -->
    <section id="page-final" class="page">
      <div class="container" id="final-card">
        <h2>Will you be my Valentine? ðŸ’˜</h2>

        <!-- SIDE-BY-SIDE initially (same as earlier pages) -->
        <div class="btn-row">
          <button id="yesBtn" class="btn">Yes</button>
          <button id="noBtn" class="btn">No</button>
        </div>

        <div id="angry">
          <h3>ðŸ˜¡ HOW DARE YOU!</h3>
          <img alt="Angry" src="angryme.jpg" />
        </div>

        <!-- Shown after 6 attempts & a real click on Yes -->
        <div id="success">
          <h3>Yay! You said YES ðŸ’ž</h3>
          <img alt="Love" src="happy.jpg" />
        </div>

        <div class="nav">6 / 6</div>
      </div>
    </section>

    <!-- Dodge message overlay -->
    <div id="dodgeMessage"></div>

    <script>
      // ------------------ Page navigation ------------------
      const pages = Array.from(document.querySelectorAll(".page"));
      function showPage(id) {
        pages.forEach((p) => p.classList.toggle("active", p.id === id));
      }
      document.addEventListener("click", (e) => {
        const nextId = e.target?.dataset?.next;
        if (nextId) showPage(nextId);
      });

      // ------------------ Final page behavior ------------------
      const yesBtn = document.getElementById("yesBtn");
      const noBtn = document.getElementById("noBtn");
      const angry = document.getElementById("angry");
      const success = document.getElementById("success");
      const dodgeMessage = document.getElementById("dodgeMessage");

      // Funny messages that rotate
      const funnyMessages = [
        "Catch me if you can! ðŸ˜œ",
        "Too slow! ðŸƒâ€â™‚ï¸",
        "Nope! Try again! ðŸ˜",
        "Almost there! ðŸ˜‚",
        "Getting closer! ðŸŽ¯",
        "Whoops! Missed me! ðŸ˜†",
        "Not today! ðŸ™ˆ",
        "Better luck next time! ðŸ€",
        "You gotta be faster! âš¡",
        "Nice try! ðŸ˜"
      ];

      let dodgeEnabled = false; // controls hover/move dodging
      let attempts = 0; // count attempts to click Yes
      let unlocked = false; // after 6 attempts, allow real click
      let messageTimeout = null;

      // Function to show dodge message
      function showDodgeMessage() {
        const randomMessage = funnyMessages[Math.floor(Math.random() * funnyMessages.length)];
        dodgeMessage.textContent = randomMessage;
        
        // Position message below the Yes button
        const rect = yesBtn.getBoundingClientRect();
        dodgeMessage.style.left = `${rect.left + rect.width / 2}px`;
        dodgeMessage.style.top = `${rect.bottom + 10}px`;
        dodgeMessage.style.transform = 'translateX(-50%)';
        
        dodgeMessage.classList.add("show");

        // Clear any existing timeout
        if (messageTimeout) clearTimeout(messageTimeout);

        // Hide message after 1 second
        messageTimeout = setTimeout(() => {
          dodgeMessage.classList.remove("show");
        }, 1000);
      }

      // --- Listeners we can add/remove cleanly ---
      function onYesAttempt(ev) {
        // If already unlocked, DO NOT prevent defaultâ€”let the click happen
        if (unlocked) return;

        ev.preventDefault();
        ev.stopPropagation();

        attempts++;
        console.log(attempts);

        // Show funny message
        showDodgeMessage();

        // First attempt: switch to fixed so we can move it anywhere
        if (!dodgeEnabled) {
          dodgeEnabled = true;

          const r = yesBtn.getBoundingClientRect();
          yesBtn.style.position = "fixed";
          yesBtn.style.transform = "none";
          yesBtn.style.zIndex = "9999";
          yesBtn.style.left = `${r.left}px`;
          yesBtn.style.top = `${r.top}px`;
        }

        // Before unlock: keep dodging
        if (attempts < 10) {
          jumpToRandomSpot();
        } else {
          unlockYesButton();
        }
      }

      function onHoverMove() {
        if (dodgeEnabled && !unlocked) {
          jumpToRandomSpot();
          attempts++;
          console.log(attempts);
          
          // Show funny message
          showDodgeMessage();
          
          if (attempts < 10) {
            jumpToRandomSpot();
          } else {
            unlockYesButton();
          }
        }
      }

      function jumpToRandomSpot() {
        const padding = 8; // margin from edges
        const vw = window.innerWidth;
        const vh = window.innerHeight;

        const rect = yesBtn.getBoundingClientRect();
        const bw = rect.width;
        const bh = rect.height;

        const maxLeft = Math.max(0, vw - bw - padding);
        const maxTop = Math.max(0, vh - bh - padding);

        const newLeft = padding + Math.random() * maxLeft;
        const newTop = padding + Math.random() * maxTop;

        yesBtn.style.bottom = "auto";
        yesBtn.style.right = "auto";
        yesBtn.style.left = `${newLeft}px`;
        yesBtn.style.top = `${newTop}px`;
        yesBtn.style.transform = "none"; // avoid centering offset while dodging
      }

      function centerYesButton() {
        yesBtn.style.left = "50%";
        yesBtn.style.top = "50%";
        yesBtn.style.transform = "translate(-50%, -50%)";
        yesBtn.style.bottom = "auto";
        yesBtn.style.right = "auto";
      }

      function unlockYesButton() {
        unlocked = true;
        dodgeEnabled = false;

        // Hide any lingering dodge message
        dodgeMessage.classList.remove("show");

        // Stop ALL dodge-related listeners immediately
        yesBtn.removeEventListener("mousedown", onYesAttempt);
        yesBtn.removeEventListener("mouseenter", onHoverMove);
        yesBtn.removeEventListener("mousemove", onHoverMove);
        yesBtn.removeEventListener("touchstart", onYesAttempt);

        // Optional: guard against stray moves
        yesBtn.style.pointerEvents = "auto";

        // Center and highlight
        // centerYesButton();
        yesBtn.textContent = "Yes ðŸ’˜";
        yesBtn.style.boxShadow = "0 0 0 4px rgba(42,157,143,0.25)";
        setTimeout(() => (yesBtn.style.boxShadow = "none"), 800);
      }

      // --- Bind listeners (desktop + mobile) ---
      yesBtn.addEventListener("mousedown", onYesAttempt);
      yesBtn.addEventListener("mouseenter", onHoverMove);
      yesBtn.addEventListener("mousemove", onHoverMove);
      yesBtn.addEventListener("touchstart", onYesAttempt, { passive: false });

      // After unlock: a normal click shows the success block
      yesBtn.addEventListener("click", () => {
        if (!unlocked) return; // ignore early clicks
        if (success) success.style.display = "block";
        if (noBtn) noBtn.style.display = "none"; // hide No button
        if (yesBtn) yesBtn.style.display = "none"; // hide Yes button
      });

      // No button shows anger block
      noBtn.addEventListener("click", () => {
        if (angry) angry.style.display = "block";
      });

      // Keep inside screen after resize/orientation change
      window.addEventListener("resize", () => {
        if (dodgeEnabled && !unlocked) jumpToRandomSpot();
        if (unlocked) centerYesButton(); // keep centered after unlock
      });
    </script>
  </body>
</html>